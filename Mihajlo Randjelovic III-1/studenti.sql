CREATE DATABASE studenti;
GO
USE studenti;

CREATE TABLE dosije (
INDEKS CHAR (6) PRIMARY KEY,
IME CHAR(30),
PREZIME CHAR (30),
GOD_RODJ DATE,
MESTO_RODJ CHAR (30)
);

CREATE TABLE predmet (
ID_PREDMETA INT PRIMARY KEY,
SIFRA_PR CHAR(6),
NAZIV CHAR(40),
KREDITI INT
);


CREATE TABLE ispitni_rok (
GODINA_ROKA INT,
OZNAKA_ROKA CHAR(8) NOT NULL,
NAZIV_ROKA CHAR (20)
);

ALTER TABLE ispitni_rok
ADD CONSTRAINT pkIspRok PRIMARY KEY (OZNAKA_ROKA);

CREATE TABLE ispit(
INDEKS CHAR(6) NOT NULL,
ID_PREDMETA INT NOT NULL,
GODINA_ROKA INT,
OZNAKA_ROKA CHAR(8) NOT NULL,
OCENA INT, 
DATUM_ISPITA DATE
);


ALTER TABLE ispit
ADD CONSTRAINT pkIsp PRIMARY KEY (INDEKS, ID_PREDMETA, OZNAKA_ROKA);

ALTER TABLE ispit
ADD CONSTRAINT fkPrIsp FOREIGN KEY (ID_PREDMETA) REFERENCES predmet (ID_PREDMETA);

ALTER TABLE ispit
ADD CONSTRAINT fkDosIsp FOREIGN KEY (INDEKS) REFERENCES dosije (INDEKS);

ALTER TABLE ispit
ADD CONSTRAINT fkRokIsp FOREIGN KEY (OZNAKA_ROKA) REFERENCES ispitni_rok (OZNAKA_ROKA);


INSERT INTO dosije VALUES
('111', 'Darko', 'Anti?', '2000', 'Smederevo'),
('222', 'Sanja', 'Pavlovi?', '2000', 'Smederevo'),
('333', 'Vukašin', 'Boškovi?', '2001', 'Subotica'),
('444', 'Dejan', 'Nikoli?', '2002', 'Niš'),
('555', 'Danijela', 'Anti?', '2001', 'Negotin'),
('666', 'Mihajlo', 'Jankovi?', '2000', 'Smederevo')


INSERT INTO predmet VALUES 
(01, 'MAT1', 'MATEMATIKA1', 20),
(02, 'INF', 'INFORMATIKA', 10),
(03, 'MAT2', 'MATEMATIKA2', 20),
(04, 'OET1', 'OSNOVE ELEKTROTEHNIKE1', 15),
(05, 'OET2', 'OSNOVE ELEKTROTEHNIKE2', 15),
(06, 'TEK', 'TEORIJA ELEKTRI?NIH KOLA', 12);

INSERT INTO ispitni_rok VALUES
(2020, 'JAN20', 'JANUAR2020'),
(2020, 'JUN20', 'JUN2020'),
(2020, 'SEP20', 'SEPTEMBAR2020'),
(2020, 'OKT20', 'OKTOBAR2020'),
(2021,'JAN21', 'JANUAR2021'),
(2021, 'JUN21', 'JUN2021'),
(2021, 'SEP21', 'SEPTEMBAR2021'),
(2021, 'OKT21', 'OKTOBAR2021'),
(2021, 'OKT220', 'OKTOBAR22021')



INSERT INTO ispit VALUES
('333', 02, 2020, 'JAN20', 5, '2020-01-18'),
('333', 01, 2020, 'JAN20', 8, '2020-01-22'),
('111', 05, 2020, 'JUN20', 6, '2020-06-18'),
('222', 02, 2021, 'JAN21', 7, '2021-01-19'),
('444', 06, 2021, 'OKT21', 5, '2021-10-10'),
('444', 03, 2020, 'SEP21', 10, '2020-09-18')


